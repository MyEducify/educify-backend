#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ðŸ§¼ Auto-formatting uncommitted C# files..."

# Get list of staged C# files
FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.cs$')

if [ -z "$FILES" ]; then
  echo "âœ… No C# files to format."
  exit 0
fi

# Format each file and stage it if it changed
for file in $FILES; do
  dotnet format --include "$file" --folder --verify-no-changes || true
  git add "$file"
done

echo "âœ… Formatting complete and files re-staged."